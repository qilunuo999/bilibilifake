(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0460":function(t,e,n){"use strict";var a=n("7031"),o=n.n(a);o.a},"0fe3":function(t,e,n){},1:function(t,e){},1032:function(t,e,n){},"130c":function(t,e,n){},"16a8":function(t,e,n){},"18a9":function(t,e,n){},"27d2":function(t,e,n){"use strict";var a=n("af07"),o=n.n(a);o.a},2804:function(t,e,n){},"2b40":function(t,e,n){},"2d2c":function(t,e,n){},"37a7":function(t,e,n){"use strict";var a=n("2d2c"),o=n.n(a);o.a},4381:function(t,e,n){"use strict";var a=n("6e03"),o=n.n(a);o.a},"47e6":function(t,e,n){},"4c3c":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("index-menu"),n("router-view")],1)},i=[],r=(n("ac1f"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","unique-opened":"",mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"/index/face"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-house"}),n("span",[t._v("首页")])])],2),n("el-menu-item",{attrs:{index:"/index/search"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-search"}),n("span",[t._v("搜索")])])],2),n("el-submenu",{attrs:{index:"/index/category"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-video-camera"}),n("span",[t._v("分类")])]),t._l(t.categories,(function(e){return n("el-menu-item",{key:e,attrs:{index:"/index/"+e},on:{click:function(n){return t.toCategory(e)}}},[t._v(t._s(e)+" ")])}))],2),n("el-submenu",{attrs:{index:"/index/account"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-user"}),n("span",[t._v("用户")])]),t.loginState?n("div",[n("el-menu-item",{attrs:{index:"/home"}},[t._v("个人中心")]),n("el-menu-item",{on:{click:function(e){return t.logout()}}},[t._v("注销")])],1):n("div",[n("el-menu-item",{attrs:{index:"/entry/login"}},[t._v("登录")]),n("el-menu-item",{attrs:{index:"/entry/register"}},[t._v("注册")])],1)],2)],1)}),s=[],c={name:"IndexNavmenu",data:function(){return{loginState:!1,categories:[]}},mounted:function(){this.initCategories(),this.initAccount()},methods:{initAccount:function(){var t=this;this.$http.get("/account/info").then((function(e){var n=e.data;200===n.code&&(t.loginState=!0,t.$store.commit("account",n.data))}))},logout:function(){var t=this;this.$http.get("/account/logout").then((function(e){var n=e.data;200===n.code?(t.$store.commit("account",null),t.loginState=!1):t.$message.error(n.message)}))},initCategories:function(){var t=this;this.$http.get("/video/categories").then((function(e){var n=e.data;200===n.code?t.categories=n.data.categories:t.$message.error(n.message)}))},toCategory:function(t){this.$router.push({path:"/index/category",query:{category:t}})}}},l=c,u=n("2877"),d=Object(u["a"])(l,r,s,!1,null,"5d28346e",null),p=d.exports,m={name:"app",components:{IndexMenu:p},created:function(){this.$router.replace("/index/face")}},h=m,g=Object(u["a"])(h,o,i,!1,null,null,null),f=g.exports,v=n("2f62"),y=n("8c4f"),x=n("28dd"),b=n("5c96"),$=n.n(b);n("c69f");a["default"].use($.a);var _=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{staticStyle:{margin:"10px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"用户","prefix-icon":"el-icon-user"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"新密码","prefix-icon":"el-icon-unlock","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"口令","prefix-icon":"el-icon-key"},model:{value:t.secretCode,callback:function(e){t.secretCode=e},expression:"secretCode"}})],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.resetPassword()}}},[t._v("重置密码 ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.sendSecretCode()}}},[t._v("获取口令 ")])],1)],1)],1),n("div",{staticStyle:{margin:"10px"}},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.routeTo("/entry/login")}}},[t._v("返回登录")])],1)])},w=[],k={name:"EntryForget",data:function(){return{username:"",password:"",secretCode:""}},methods:{routeTo:function(t){this.$router.push(t)},sendSecretCode:function(){var t=this;""!==this.username?this.$http.get("/account/sendSecretCode",{params:{username:this.username}}).then((function(e){var n=e.data;200===n.code?t.$message.success("口令已发送至邮箱"):t.$message.error(n.message)})):this.$message.error("请输入用户名")},resetPassword:function(){var t=this;this.$http.put("/account/resetPassword",{params:{username:this.username,secretCode:this.secretCode,newPassword:this.newPassword}}).then((function(e){var n=e.data;200===n.code?t.$message.success("重置密码成功"):t.$message.error(n.message)}))}}},I=k,C=(n("fba2"),Object(u["a"])(I,_,w,!1,null,"3ac014da",null)),D=C.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{staticStyle:{margin:"10px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"用户","prefix-icon":"el-icon-user"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"昵称","prefix-icon":"el-icon-user"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-message"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"密码","prefix-icon":"el-icon-unlock","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{placeholder:"验证码","prefix-icon":"el-icon-key"},model:{value:t.puzzleCode,callback:function(e){t.puzzleCode=e},expression:"puzzleCode"}})],1),n("el-col",{attrs:{span:12}},[n("el-image",{staticClass:"puzzle-image",attrs:{src:t.puzzleImageUrl}})],1),n("el-col",{attrs:{span:24}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.register()}}},[t._v("注册 ")])],1)],1)],1),n("div",{staticStyle:{margin:"10px"}},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.routeTo("/entry/login")}}},[t._v("返回登录")])],1)])},V=[],z={name:"EntryRegister",data:function(){return{username:"",nickname:"",password:"",email:"",puzzleCode:"",puzzleImageUrl:""}},mounted:function(){this.loadPuzzle()},methods:{routeTo:function(t){this.$router.push(t)},loadPuzzle:function(){var t=this;this.$http.get("/account/puzzle").then((function(e){var n=e.data;200===n.code?t.puzzleImageUrl=n.data["imageUrl"]:t.$message.error(n.message)}))},register:function(){var t=this;this.$http.post("/account/register",{params:{username:this.username,password:this.password,nickname:this.nickname,email:this.email,puzzleCode:this.puzzleCode}}).then((function(e){var n=e.data;200===n.code?t.$message.success("注册成功"):t.$message.error(n.message)}))}}},U=z,T=(n("eff9"),Object(u["a"])(U,S,V,!1,null,"0c696fb4",null)),j=T.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{staticStyle:{margin:"10px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"用户","prefix-icon":"el-icon-user"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"密码","prefix-icon":"el-icon-unlock","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{placeholder:"验证码","prefix-icon":"el-icon-key"},model:{value:t.puzzleCode,callback:function(e){t.puzzleCode=e},expression:"puzzleCode"}})],1),n("el-col",{attrs:{span:12}},[n("el-image",{staticClass:"puzzle-image",attrs:{src:t.puzzleImageUrl},on:{click:function(e){return t.loadPuzzle()}}})],1),n("el-col",{attrs:{span:24}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.login()}}},[t._v("登录 ")])],1)],1)],1),n("div",{staticStyle:{margin:"10px"}},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.routeTo("/entry/register")}}},[t._v("注册用户")]),n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.routeTo("/entry/forget")}}},[t._v("重置密码")])],1)])},P=[],E={name:"EntryLogin",data:function(){return{username:"",password:"",puzzleCode:"",puzzleImageUrl:""}},mounted:function(){this.loadPuzzle()},methods:{routeTo:function(t){this.$router.push(t)},login:function(){var t=this;this.$http.get("/account/login",{params:{username:this.username,password:this.password,puzzleCode:this.puzzleCode}}).then((function(e){var n=e.data;200===n.code?(t.initAccount(),t.$router.push("/index/face"),window.location.reload()):t.$message.error(n.message)}))},loadPuzzle:function(){var t=this;this.$http.get("/account/puzzle").then((function(e){var n=e.data;200===n.code?t.puzzleImageUrl=n.data["imageUrl"]:t.$message.error(n.message)}))},initAccount:function(){var t=this;this.$http.get("/account/info").then((function(e){var n=e.data;200===n.code?t.$store.commit("account",n.data):t.$message.error(n.message)}))}}},q=E,F=(n("f4dc"),Object(u["a"])(q,O,P,!1,null,"6f480990",null)),A=F.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entry-container"},[n("el-row",[n("el-col",{attrs:{offset:16,span:6}},[n("div",{staticStyle:{"margin-top":"25%"}},[n("router-view")],1)])],1)],1)},H=[],Z={name:"Entry",methods:{backgroundUrl:function(){var t=["/gallery/TIM20191201185246.jpg","/gallery/TIM20191201185251.jpg","/gallery/TIM20191201185256.jpg","/gallery/TIM20191201185259.jpg","/gallery/TIM20191201185303.jpg","/gallery/TIM20191201185322.jpg","/gallery/TIM20191201185332.jpg","/gallery/TIM20191201185342.jpg","/gallery/TIM20191201185623.jpg","/gallery/TIM20191201185339.jpg","/gallery/TIM20191201185335.jpg","/gallery/TIM20191201185328.jpg","/gallery/TIM20191201185310.jpg","/gallery/TIM20191201185307.jpg"],e=Math.round(Math.random()*t.length);return t[e]}}},N=Z,B=(n("37a7"),Object(u["a"])(N,M,H,!1,null,"df719150",null)),J=B.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"昵称","prefix-icon":"el-icon-user"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-message"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"旧密码（可选）","prefix-icon":"el-icon-unlock","show-password":""},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"新密码（可选）","prefix-icon":"el-icon-unlock","show-password":""},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.setAccount()}}},[t._v("修改信息 ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.setPassword()}}},[t._v("修改密码 ")])],1)],1)],1)],1)},R=[],G={name:"HomeAccount",data:function(){return{nickname:"",email:"",oldPassword:"",newPassword:""}},mounted:function(){this.initInfo()},methods:{initInfo:function(){var t=this.$store.getters.account;this.nickname=t.nickname,this.email=t.email},setPassword:function(){var t=this;this.$http.put("/account/setPassword",{params:{oldPassword:this.oldPassword,newPassword:this.newPassword}}).then((function(e){var n=e.data;200===n.code?t.$message.success("修改密码成功"):t.$message.error(n.message)}))},setAccount:function(){var t=this;this.$http.put("/account/update",{params:{username:this.username,nickname:this.nickname,email:this.email}}).then((function(e){var n=e.data;200===n.code?(t.$message.success("保存信息成功"),t.initAccount()):t.$message.error(n.message)}))},initAccount:function(){var t=this;this.$http.get("/account/info").then((function(e){var n=e.data;200===n.code?t.$store.commit("account",n.data):t.$message.error(n.message)}))}}},K=G,Q=(n("d168"),Object(u["a"])(K,L,R,!1,null,"71ae52f0",null)),W=Q.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:5,type:"flex"}},t._l(t.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:4}},[n("el-card",{staticStyle:{margin:"10px"},attrs:{shadow:"hover","body-style":{padding:0}}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("div",{staticStyle:{margin:"10px 10px 0"}},[n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(t.splitText(e.title,20))+" ")])],1),n("div",[n("span",{staticClass:"video-duration"},[t._v(" 时间："+t._s(e.duration)+" ")]),n("el-link",{staticClass:"delete-link",attrs:{type:"danger",underline:!1},on:{click:function(n){return t.cancelCollect(e.ID)}}},[t._v("删除 ")])],1)])],1)})),1),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadVideos()}}})],1)],1)},Y=[],tt=(n("4de4"),{name:"HomeCollecting",data:function(){return{pagination:{current:1,total:1},videos:[]}},mounted:function(){this.loadVideos()},methods:{splitText:function(t,e){var n=t.substring(0,e);return t.length<=e?n:n+"..."},cancelCollect:function(t){var e=this;this.$http.delete("/video/cancelCollect",{params:{videoID:t}}).then((function(n){var a=n.data;200===a.code?(e.videos=e.videos.filter((function(e){return e.ID!==t})),e.$message.success("删除成功")):e.$message.error(a.message)}))},loadVideos:function(){var t=this;this.$http.get("/video/collected",{params:{page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.pagination.total=n.data.total,t.videos=n.data.videos):t.$message.error(n.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}}),et=tt,nt=(n("0460"),Object(u["a"])(et,X,Y,!1,null,"4c0b130b",null)),at=nt.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:10,type:"flex"}},t._l(t.comments,(function(e){return n("el-col",{key:e.ID,attrs:{span:6}},[n("el-card",{staticClass:"comment-card",attrs:{shadow:"hover"}},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("span",{staticClass:"comment-text"},[t._v(" "+t._s(t.splitText(e.text,100))+" ")])]),n("div",[n("el-link",{staticClass:"video-title",attrs:{type:"info",underline:!1},on:{click:function(n){return t.toVideo(e.videoID)}}},[t._v(" "+t._s(t.splitText(e.videoTitle,10))+" ")]),n("el-link",{staticClass:"delete-link",attrs:{type:"danger",underline:!1},on:{click:function(n){return t.deleteComment(e.ID)}}},[t._v("删除 ")])],1)])],1)})),1),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadComments()}}})],1)],1)},it=[],rt={name:"HomeComment",data:function(){return{pagination:{current:1,total:1},comments:[]}},mounted:function(){this.loadComments()},methods:{splitText:function(t,e){var n=t.substring(0,e);return t.length<=e?n:n+"..."},loadComments:function(){var t=this,e=this.$store.getters.account.UID;this.$http.get("/comment/user",{params:{UID:e,page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.comments=n.data.comments,t.pagination.total=n.data.total):t.$message.error(n.message)}))},deleteComment:function(t){var e=this;this.$http.delete("/comment/delete",{params:{commentID:t}}).then((function(n){var a=n.data;200===a.code?(e.comments=e.comments.filter((function(e){return e.ID!==t})),e.$message.success("评论删除成功")):e.$message.error(a.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},st=rt,ct=(n("e1bf"),Object(u["a"])(st,ot,it,!1,null,"533c04d9",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:10,type:"flex"}},t._l(t.accounts,(function(e){return n("el-col",{key:e.UID,attrs:{span:6}},[n("el-card",{staticClass:"account-card",attrs:{shadow:"hover"}},[n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:12}},[n("el-avatar",{attrs:{size:80,src:e.avatarUrl}})],1),n("el-col",{attrs:{span:12}},[n("div",{staticStyle:{"margin-top":"5px"}},[n("el-link",{attrs:{underline:!1},on:{click:function(n){return t.toZone(e.UID)}}},[n("strong",{staticClass:"nickname-link"},[t._v(" "+t._s(e.nickname)+" ")])])],1),n("div",{staticClass:"cancel-follow-link"},[n("el-link",{attrs:{type:"info",underline:!1,icon:"el-icon-minus"},on:{click:function(n){return t.cancelFollow(e.UID)}}},[t._v("取消关注 ")])],1)])],1)],1)],1)})),1)],1)},dt=[],pt={name:"HomeFollowing",data:function(){return{accounts:[]}},mounted:function(){this.loadFollowing()},methods:{loadFollowing:function(){var t=this;this.$http.get("/social/followed").then((function(e){var n=e.data;200===n.code?t.accounts=n.data.accounts:t.$message.error(n.message)}))},cancelFollow:function(t){var e=this;this.$http.delete("/social/cancelFollow",{params:{UID:t}}).then((function(n){var a=n.data;200===a.code?e.accounts=e.accounts.filter((function(e){return e.UID!==t})):e.$message.error(a.message)}))},toZone:function(t){this.$router.push({path:"/zone/",query:{UID:t}})}}},mt=pt,ht=(n("db4f"),Object(u["a"])(mt,ut,dt,!1,null,"357354ba",null)),gt=ht.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:5,type:"flex"}},t._l(t.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:4}},[n("el-card",{staticStyle:{margin:"10px"},attrs:{shadow:"hover","body-style":{padding:0}}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("div",{staticStyle:{padding:"10px"}},[n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(t.splitText(e.title,20))+" ")])],1)])],1)})),1),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadVideos()}}})],1)],1)},vt=[],yt={name:"HomeHistory",data:function(){return{pagination:{current:1,total:1},videos:[]}},mounted:function(){this.loadVideos()},methods:{splitText:function(t,e){var n=t.substring(0,e);return t.length<=e?n:n+"..."},loadVideos:function(){var t=this;this.$http.get("/video/history",{params:{page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.videos=n.data.videos,t.pagination.total=n.data.total):t.$message.error(n.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},xt=yt,bt=(n("df74"),Object(u["a"])(xt,ft,vt,!1,null,"1e3c1606",null)),$t=bt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpeg",id:"thumbInput"}}),n("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"video/mp4,video/ogg",id:"videoInput"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"标题","prefix-icon":"el-icon-video-camera"},model:{value:t.videoTitle,callback:function(e){t.videoTitle=e},expression:"videoTitle"}})],1),n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{placeholder:"内容简介",type:"textarea",rows:"10"},model:{value:t.videoIntroduction,callback:function(e){t.videoIntroduction=e},expression:"videoIntroduction"}})],1),n("el-col",{attrs:{span:12}},[n("el-tag",{staticClass:"file-tag",attrs:{type:"success"}},[t._v("视频： "),null!=t.videoFile?n("span",[t._v(t._s(t.videoFile.name))]):n("span",[t._v("未选择")])]),n("el-tag",{staticClass:"file-tag",attrs:{type:"primary"}},[t._v("封面： "),null!=t.thumbFile?n("span",[t._v(t._s(t.thumbFile.name))]):n("span",[t._v("未选择")])])],1),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"视频分类"},model:{value:t.videoCategory,callback:function(e){t.videoCategory=e},expression:"videoCategory"}},t._l(t.categories,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-col",{attrs:{span:3}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.thumbInput.click()}}},[t._v("选择封面 ")])],1),n("el-col",{attrs:{span:3}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.videoInput.click()}}},[t._v("选择视频 ")])],1),n("el-col",{attrs:{span:3}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(e){return t.uploadVideo()}}},[t._v("发布视频 ")])],1)],1)],1)},wt=[],kt={name:"HomeEditor",data:function(){return{categories:[],videoTitle:"",videoIntroduction:"",videoCategory:"",videoFile:null,thumbFile:null,videoInput:null,thumbInput:null}},mounted:function(){this.initCategories(),this.initVideoInput(),this.initThumbInput()},methods:{initVideoInput:function(){var t=this,e=document.getElementById("videoInput");this.videoInput=e,e.onchange=function(){return t.videoFile=e.files[0]}},initThumbInput:function(){var t=this,e=document.getElementById("thumbInput");this.thumbInput=e,e.onchange=function(){return t.thumbFile=e.files[0]}},initCategories:function(){var t=this;this.$http.get("/video/categories").then((function(e){var n=e.data;200===n.code?t.categories=n.data.categories:t.$message.error(n.message)}))},uploadVideo:function(){var t=this;if(null==this.videoFile)this.$message.warning("请选择视频文件");else if(null==this.thumbFile)this.$message.warning("请选择视频封面");else if(""===this.videoTitle)this.$message.warning("请输入视频标题");else if(""===this.thumbFile)this.$message.warning("请输入视频简介");else if(""===this.videoCategory)this.$message.warning("请选择视频类型");else{var e=new FormData;e.append("data",this.videoFile),e.append("title",this.videoTitle),e.append("introduction",this.videoIntroduction),e.append("thumb",this.thumbFile),e.append("category",this.videoCategory),this.$http.post("/video/upload",e).then((function(e){var n=e.data;200===n.code?t.$notify({title:"上传视频完成",message:"请在我的视频查看",type:"success"}):t.$notify({title:"上传视频失败",message:n.message,type:"error"})})),this.$notify({title:"正在上传视频",message:"请勿离开当前页面",type:"warning"})}}}},It=kt,Ct=(n("7092"),Object(u["a"])(It,_t,wt,!1,null,"056ddce3",null)),Dt=Ct.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:5,type:"flex"}},t._l(t.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:4}},[n("el-card",{staticStyle:{margin:"10px"},attrs:{shadow:"hover","body-style":{padding:0}}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("div",{staticStyle:{margin:"10px 10px 0"}},[n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(t.splitText(e.title,20))+" ")])],1),n("div",[n("span",{staticClass:"video-duration"},[t._v(" 时间："+t._s(e.duration)+" ")]),n("el-link",{staticClass:"delete-link",attrs:{type:"danger",underline:!1},on:{click:function(n){return t.deleteVideo(e.ID)}}},[t._v("删除 ")])],1)])],1)})),1),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadVideos()}}})],1)],1)},Vt=[],zt={name:"HomeUploading",data:function(){return{pagination:{current:1,total:1},videos:[]}},mounted:function(){this.loadVideos()},methods:{splitText:function(t,e){var n=t.substring(0,e);return t.length<=e?n:n+"..."},loadVideos:function(){var t=this;this.$http.get("/video/uploaded",{params:{page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.videos=n.data.videos,t.pagination.total=n.data.total):t.$message.error(n.message)}))},deleteVideo:function(t){var e=this;this.$http.delete("/video/delete",{params:{videoID:t}}).then((function(t){var n=t.data;200===n.code?e.$message.success("视频删除成功"):e.$message.error(n.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},Ut=zt,Tt=(n("27d2"),Object(u["a"])(Ut,St,Vt,!1,null,"05a932ab",null)),jt=Tt.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-col",{attrs:{span:4}},[n("home-navmenu")],1),n("el-col",{attrs:{span:20}},[n("router-view",{staticStyle:{margin:"30px"}})],1)],1)},Pt=[],Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","unique-opened":""}},[t.isAvatarNew?t._e():n("div",{staticClass:"avatar-image"},[n("el-avatar",{attrs:{size:100,src:this.$store.getters.account.avatarUrl}}),n("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpeg",id:"avatarInput"}})],1),n("div",{staticClass:"nickname-text"},[n("el-tooltip",{attrs:{placement:"top",content:"更换头像"}},[n("el-link",{staticStyle:{color:"gray","font-weight":"bold"},attrs:{underline:!1},on:{click:function(e){return t.setAvatar()}}},[t._v(" "+t._s(this.$store.getters.account.nickname)+" ")])],1)],1),t._l(t.menuItems,(function(e){return n("el-menu-item",{key:e.index,attrs:{index:e.index}},[n("template",{slot:"title"},[n("i",{class:e.icon}),n("span",[t._v(t._s(e.title))])])],2)}))],2)},qt=[],Ft={name:"HomeNavmenu",mounted:function(){this.initAvatarInput()},data:function(){return{avatarInput:null,isAvatarNew:!1,menuItems:[{title:"关注用户",index:"/home/following",icon:"el-icon-user"},{title:"我的视频",index:"/home/uploading",icon:"el-icon-video-play"},{title:"收藏视频",index:"/home/collecting",icon:"el-icon-star-off"},{title:"观看历史",index:"/home/history",icon:"el-icon-view"},{title:"评论管理",index:"/home/comment",icon:"el-icon-chat-dot-round"},{title:"上传视频",index:"/home/editor",icon:"el-icon-upload2"},{title:"用户信息",index:"/home/account",icon:"el-icon-edit-outline"}]}},methods:{initAvatarInput:function(){var t=this,e=document.getElementById("avatarInput");this.avatarInput=e,e.onchange=function(){var n=e.files[0],a=new FormData;a.append("imageData",n),t.$http.post("/account/setAvatar",a).then((function(e){var n=e.data;200===n.code?(t.isAvatarNew=!0,t.$store.getters.account.avatarUrl=n["newAvatarUrl"],t.isAvatarNew=!1):t.$message.error(n.message)}))}},setAvatar:function(){this.avatarInput.click()}}},At=Ft,Mt=(n("aca4"),Object(u["a"])(At,Et,qt,!1,null,"4a92c98f",null)),Ht=Mt.exports,Zt={name:"Home",components:{HomeNavmenu:Ht},mounted:function(){null==this.$store.getters.account&&this.$router.push("/entry/login")}},Nt=Zt,Bt=Object(u["a"])(Nt,Ot,Pt,!1,null,"6b555460",null),Jt=Bt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{margin:"20px"}},[n("el-card",{attrs:{shadow:"never"}},[n("el-row",{attrs:{gutter:10}},t._l(t.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:3}},[n("div",{staticStyle:{margin:"10px"}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(e.title.substring(0,20))+" ")])],1)])})),1),n("br"),n("el-row",{staticStyle:{margin:"10px"},attrs:{gutter:10}},[n("el-col",{attrs:{offset:8,span:8}},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadVideos()}}})],1),n("el-col",{attrs:{offset:6,span:2}},[n("el-select",{attrs:{size:"small",placeholder:"排序类型"},on:{change:function(e){return t.loadVideos()}},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}},t._l(t.orders,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1)],1)},Rt=[],Gt={name:"IndexCategory",data:function(){return{category:this.$route.query.category,order:"综合排序",orders:["综合排序"],pagination:{current:1,total:10},videos:[]}},mounted:function(){this.initOrders(),this.loadVideos()},watch:{$route:function(){this.category=this.$route.query.category,this.loadVideos()}},methods:{toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})},initOrders:function(){var t=this;this.$http.get("/video/orders").then((function(e){var n=e.data;200===n.code?t.orders=n.data.orders:t.$message.error(n.message)}))},loadVideos:function(){var t=this;this.$http.get("/video/search",{params:{page:this.pagination.current,category:this.category,order:this.order}}).then((function(e){var n=e.data;200===n.code?(t.videos=n.data.videos,t.pagination.total=n.data.total):t.$message.error(n.message)}))}}},Kt=Gt,Qt=(n("f3a5"),Object(u["a"])(Kt,Lt,Rt,!1,null,"ed4a476a",null)),Wt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("index-carousel"),n("br"),n("index-cards")],1)},Yt=[],te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-carousel",{attrs:{type:"card"}},t._l(t.videos,(function(e){return n("el-carousel-item",{key:e.ID},[n("el-row",{staticClass:"carousel-item",style:"background-image: url("+e.thumbUrl+")",attrs:{gutter:20}},[n("el-col",{attrs:{offset:12,span:12}},[n("div",{staticClass:"video-info"},[n("el-link",{attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[n("h3",{staticClass:"video-title"},[t._v(t._s(e.title))])]),n("p",{staticClass:"video-introduction"},[t._v(t._s(e.introduction))])],1)])],1)],1)})),1)},ee=[],ne={name:"IndexCarousel",data:function(){return{videos:[]}},mounted:function(){this.loadCarousel()},methods:{loadCarousel:function(){var t=this;this.$http.get("/video/carousel").then((function(e){var n=e.data;200===n.code?t.videos=n.data.videos:t.$message.error(n.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},ae=ne,oe=(n("a76b"),Object(u["a"])(ae,te,ee,!1,null,"2166280b",null)),ie=oe.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{type:"flex"}},t._l(t.categories,(function(e){return n("el-col",{key:e.title,attrs:{span:12}},[n("el-card",{staticStyle:{margin:"10px"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(e.title))]),n("el-button",{staticClass:"more-button",attrs:{type:"text"},on:{click:function(n){return t.toCategory(e.title)}}},[t._v(" 更多"),n("i",{staticClass:"el-icon-arrow-right"})])],1),n("el-row",{attrs:{gutter:20}},t._l(e.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:6}},[n("div",{staticStyle:{margin:"10px"}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(e.title.substring(0,20))+" ")])],1)])})),1)],1)],1)})),1)},se=[],ce=(n("4160"),n("fb6a"),n("159b"),{name:"IndexCards",data:function(){return{categories:[]}},mounted:function(){this.initCategories(),this.loadVideos()},methods:{toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})},initCategories:function(){var t=this;this.$http.get("/video/categories").then((function(e){var n=e.data;200===n.code?(t.categories=[],n.data.categories.forEach((function(e){var n={title:e,videos:[]};t.categories.push(n),t.loadVideos(n)}))):t.$message.error(n.message)}))},loadVideos:function(t){var e=this;this.$http.get("/video/search",{params:{page:1,category:t.title}}).then((function(n){var a=n.data;200===a.code?t["videos"]=a.data.videos.slice(0,8):e.$message.error(a.message)}))},toCategory:function(t){this.$router.push({path:"/index/category",query:{category:t}})}}}),le=ce,ue=(n("4381"),Object(u["a"])(le,re,se,!1,null,"cec53cec",null)),de=ue.exports,pe={name:"IndexFace",components:{IndexCards:de,IndexCarousel:ie}},me=pe,he=Object(u["a"])(me,Xt,Yt,!1,null,"6f826c2d",null),ge=he.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{margin:"20px"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{offset:4,span:16}},[n("el-input",{attrs:{placeholder:"输入关键词"},model:{value:t.keywordText,callback:function(e){t.keywordText=e},expression:"keywordText"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.search()}},slot:"append"},[t._v("搜索 ")])],1)],1)],1),n("br"),t.videos.length>0?n("el-card",{attrs:{shadow:"never"}},[n("el-row",{attrs:{gutter:10}},t._l(t.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:3}},[n("div",{staticStyle:{margin:"10px"}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(e.title.substring(0,20))+" ")])],1)])})),1),n("br"),n("el-row",{staticStyle:{margin:"10px"},attrs:{gutter:10}},[n("el-col",{attrs:{offset:8,span:8}},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadVideos()}}})],1),n("el-col",{attrs:{offset:6,span:2}},[n("el-select",{attrs:{size:"small",placeholder:"排序类型"},on:{change:function(e){return t.loadVideos()}},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}},t._l(t.orders,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1):t._e()],1)},ve=[],ye={name:"IndexSearch",data:function(){return{keywordText:"",keyword:"",order:"综合排序",orders:["综合排序"],pagination:{current:1,total:1},videos:[]}},mounted:function(){this.initOrders()},methods:{toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})},initOrders:function(){var t=this;this.$http.get("/video/orders").then((function(e){var n=e.data;200===n.code?t.orders=n.data.orders:t.$message.error(n.message)}))},search:function(){this.keyword=this.keywordText,this.loadVideos()},loadVideos:function(){var t=this;this.$http.get("/video/search",{params:{page:this.pagination.current,keyword:this.keyword,order:this.order}}).then((function(e){var n=e.data;200===n.code?(t.videos=n.data.videos,t.pagination.total=n.data.total):t.$message.error(n.message)}))}}},xe=ye,be=(n("a320"),Object(u["a"])(xe,fe,ve,!1,null,"db2a5d6e",null)),$e=be.exports,_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},we=[],ke={name:"Index"},Ie=ke,Ce=Object(u["a"])(Ie,_e,we,!1,null,"10f92705",null),De=Ce.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{margin:"20px"}},[n("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("video-playing",{attrs:{ID:t.ID}})],1),n("el-col",{attrs:{span:6}},[n("video-similar",{attrs:{ID:t.ID}})],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("video-comment",{attrs:{ID:t.ID}})],1)],1)],1)},Ve=[],ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-page-header",{staticStyle:{"margin-bottom":"20px"},attrs:{content:t.video.title},on:{back:function(e){return t.goBack()}}}),n("video",{staticStyle:{width:"100%",height:"auto"},attrs:{src:t.video.url,controls:"",autoplay:""}},[t._v(" 您的浏览器不支持该视频播放。 ")]),n("el-row",{staticStyle:{"margin-top":"5px","margin-bottom":"5px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:16}},[n("el-link",{attrs:{underline:!1,icon:"el-icon-user"},on:{click:function(e){return t.toZone(t.video.UID)}}},[t._v(" 上传用户："+t._s(t.video.nickname)+" ")])],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[n("el-link",{attrs:{type:"danger",underline:!1,icon:"el-icon-thumb"},on:{click:function(e){return t.like(t.video.ID)}}},[t._v(" 点赞（"+t._s(t.video.likeCount)+"） ")]),n("el-link",{attrs:{type:"warning",underline:!1,icon:"el-icon-star-off"},on:{click:function(e){return t.collect(t.video.ID)}}},[t._v(" 收藏（"+t._s(t.video.collectCount)+"） ")]),n("el-link",{attrs:{type:"info",underline:!1,icon:"el-icon-view"}},[t._v(" 播放（"+t._s(t.video.visitCount)+"） ")])],1)],1),n("p",{staticClass:"introduction-text"},[t._v(" 简介："+t._s(t.video.introduction)+" ")])],1)},Ue=[],Te={name:"VideoPlaying",props:{ID:{type:String,required:!0}},data:function(){return{video:{ID:"",title:"",introduction:"",url:"",thumbUrl:"",duration:"",uploadTime:"",UID:0,nickname:"",avatarUrl:"",visitCount:0,likeCount:0,collectCount:0}}},watch:{ID:function(){this.loadVideo()}},mounted:function(){this.loadVideo()},methods:{goBack:function(){this.$router.go(-1)},loadVideo:function(){var t=this;this.$http.get("/video/detail",{params:{ID:this.ID}}).then((function(e){var n=e.data;200===n.code?t.video=n.data:t.$message.error(n.message)}))},like:function(t){var e=this;this.$http.put("/video/like",{params:{ID:t}}).then((function(t){var n=t.data;200===n.code?(e.$message.success("点赞成功"),e.video.likeCount++):e.$message.error(n.message)}))},collect:function(t){var e=this;this.$http.post("/video/collect",{params:{ID:t}}).then((function(t){var n=t.data;200===n.code?(e.$message.success("收藏成功"),e.video.collectCount++):e.$message.error(n.message)}))},toZone:function(t){this.$router.push({path:"/zone/",query:{UID:t}})},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},je=Te,Oe=(n("e123"),Object(u["a"])(je,ze,Ue,!1,null,"249e7174",null)),Pe=Oe.exports,Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{staticClass:"comment-button",attrs:{type:"primary"},on:{click:function(e){return t.postComment()}}},[t._v("评论 ")])],1)],1),n("el-divider"),t._l(t.comments,(function(e){return n("div",{key:e.ID},[n("el-row",{attrs:{gutter:20}},[n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[n("el-avatar",{attrs:{size:50,src:e.avatarUrl}}),n("br"),n("el-link",{attrs:{type:"info",underline:!1}},[n("span",{staticClass:"nickname-text"},[t._v(" "+t._s(e.nickname)+" ")])])],1),n("el-col",{attrs:{span:22}},[n("span",{staticClass:"comment-text"},[t._v(" "+t._s(e.text)+" ")]),n("div",{staticClass:"comment-info"},[n("span",[t._v(t._s(e.postTime))])])])],1),n("el-divider")],1)})),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next",background:"","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadComments()}}})],1)],2)},qe=[],Fe={name:"VideoComment",props:{ID:{type:String,required:!0}},data:function(){return{commentText:"",pagination:{current:1,total:1},comments:[]}},watch:{ID:function(){this.loadComments()}},mounted:function(){this.loadComments()},methods:{loadComments:function(){var t=this;this.$http.get("/comment/video",{params:{videoID:this.ID,page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.comments=n.data.comments,t.total=n.data.total):t.$message.error(n.message)}))},postComment:function(){var t=this;null==this.$store.getters.account?this.$message.warning("请登陆后进行操作"):0===this.commentText.length?this.$message.warning("评论不能为空"):this.$http.post("/comment/post",{params:{videoID:this.ID,commentText:this.commentText}}).then((function(e){var n=e.data;200===n.code?(t.$message.success("评论成功"),t.loadComments(),t.commentText=""):t.$message.error(n.message)}))}}},Ae=Fe,Me=(n("8979"),Object(u["a"])(Ae,Ee,qe,!1,null,"72cf701a",null)),He=Me.exports,Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"45px"}},[t._l(t.videos,(function(e){return n("div",{key:e.ID,staticStyle:{"margin-bottom":"5px"}},[n("el-card",{staticStyle:{margin:"10px"},attrs:{shadow:"hover","body-style":{padding:0}}},[n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:10}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}})]),n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{margin:"10px"}},[n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(e.title.substring(0,35))+" ")])],1)])],1)],1)],1)})),n("div",{staticClass:"reload-button"},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",plain:"",icon:"el-icon-refresh-right"},on:{click:function(e){return t.loadVideos()}}},[t._v("刷新列表 ")])],1)],2)},Ne=[],Be={name:"VideoSimilar",props:{ID:{type:String,required:!0}},data:function(){return{videos:[]}},watch:{ID:function(){this.loadVideos()}},mounted:function(){this.loadVideos()},methods:{toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})},loadVideos:function(){var t=this;this.$http.get("/video/relative",{params:{videoID:this.ID}}).then((function(e){var n=e.data;200===n.code?t.videos=n.data.videos:t.$message.error(n.message)}))}}},Je=Be,Le=(n("a2cc"),Object(u["a"])(Je,Ze,Ne,!1,null,"07b5276e",null)),Re=Le.exports,Ge={name:"Video",components:{VideoSimilar:Re,VideoComment:He,VideoPlaying:Pe},data:function(){return{ID:this.$route.query.ID}},watch:{$route:function(){this.ID=this.$route.query.ID}}},Ke=Ge,Qe=Object(u["a"])(Ke,Se,Ve,!1,null,"7241a8be",null),We=Qe.exports,Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticStyle:{margin:"20px"},attrs:{gutter:10}},[n("el-col",{attrs:{span:18}},[n("zone-video",{attrs:{UID:t.UID}}),n("br"),n("zone-comment",{attrs:{UID:t.UID}})],1),n("el-col",{attrs:{span:6}},[n("zone-account",{attrs:{UID:t.UID}})],1)],1)},Ye=[],tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:10}},[n("el-avatar",{attrs:{size:80,src:t.account.avatarUrl}})],1),n("el-col",{attrs:{span:14}},[n("div",{staticStyle:{"margin-top":"5px"}},[n("el-link",{attrs:{underline:!1}},[n("strong",{staticClass:"nickname-text"},[t._v(t._s(t.account.nickname))])])],1),n("div",{staticStyle:{position:"absolute",bottom:"15px"}},[t.account.followable?n("el-link",{attrs:{type:"primary",underline:!1,icon:"el-icon-plus"},on:{click:function(e){return t.follow()}}},[t._v("关注 ")]):n("el-link",{attrs:{type:"info",underline:!1,icon:"el-icon-minus"},on:{click:function(e){return t.cancelFollow()}}},[t._v("取消关注 ")])],1)])],1),n("br"),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{offset:2,span:10}},[n("span",{staticClass:"statistic-text"},[t._v(" 作品数量："+t._s(t.statistic.videoCount)+" ")])]),n("el-col",{attrs:{offset:2,span:10}},[n("span",{staticClass:"statistic-text"},[t._v(" 粉丝数量："+t._s(t.statistic.fansCount)+" ")])]),n("el-col",{attrs:{offset:2,span:10}},[n("span",{staticClass:"statistic-text"},[t._v(" 获赞数量："+t._s(t.statistic.likeCount)+" ")])]),n("el-col",{attrs:{offset:2,span:10}},[n("span",{staticClass:"statistic-text"},[t._v(" 播放数量："+t._s(t.statistic.visitCount)+" ")])])],1)],1)},en=[],nn=(n("7db0"),n("a9e3"),{name:"ZoneAccount",props:{UID:{type:Number,required:!0}},data:function(){return{account:{avatarUrl:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",nickname:"",followable:!0},statistic:{videoCount:0,fansCount:0,visitCount:0,likeCount:0}}},mounted:function(){this.initAccount(),this.initFollowable(),this.initStatistic()},methods:{follow:function(){var t=this;null!=this.$store.getters.account?this.$http.post("/social/follow",{params:{UID:this.UID}}).then((function(e){var n=e.data;200===n.code?t.account.followable=!1:t.$message.error(n.message)})):this.$message.warning("请登陆后进行操作")},cancelFollow:function(){var t=this;null!=this.$store.getters.account?this.$http.delete("/social/cancelFollow",{params:{UID:this.UID}}).then((function(e){var n=e.data;200===n.code?t.account.followable=!0:t.$message.error(n.message)})):this.$message.warning("请登陆后进行操作")},initFollowable:function(){var t=this;null!=this.$store.getters.account&&this.$http.get("/social/followed").then((function(e){var n=e.data;200===n.code?t.account.followable=void 0===n.data.accounts.find((function(e){return e.UID===t.UID})):t.$message.error(n.message)}))},initStatistic:function(){var t=this;this.$http.get("/account/statistic",{params:{UID:this.UID}}).then((function(e){var n=e.data;200===n.code?t.statistic=n.data:t.$message.error(n.message)}))},initAccount:function(){var t=this;this.$http.get("/account/info",{params:{UID:this.UID}}).then((function(e){var n=e.data;200===n.code?t.account=n.data:t.$message.error(n.message)}))}}}),an=nn,on=(n("9050"),Object(u["a"])(an,tn,en,!1,null,"41a1a8ea",null)),rn=on.exports,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("TA的评论")])]),n("el-row",{attrs:{gutter:20}},t._l(t.comments,(function(e){return n("el-col",{key:e.ID,attrs:{span:24}},[n("p",{staticClass:"comment-text"},[t._v(t._s(e.text))]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20}},[n("el-link",{staticClass:"comment-info",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.videoID)}}},[t._v(" 视频："+t._s(e.videoTitle.substring(0,50))+" ")])],1),n("el-col",{attrs:{span:4}},[n("span",{staticClass:"comment-info"},[t._v(t._s(e.postTime))])])],1),n("el-divider")],1)})),1),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadComments()}}})],1)],1)},cn=[],ln={name:"ZoneComment",props:{UID:{type:Number,required:!0}},data:function(){return{pagination:{total:1,current:1},comments:[]}},mounted:function(){this.loadComments()},methods:{loadComments:function(){var t=this;this.$http.get("/comment/user",{params:{UID:this.UID,page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.comments=n.data.comments,t.pagination.total=n.data.total):t.$message.error(n.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},un=ln,dn=(n("a597"),Object(u["a"])(un,sn,cn,!1,null,"1c02f077",null)),pn=dn.exports,mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("TA的视频")])]),n("el-row",{attrs:{gutter:20,type:"flex"}},t._l(t.videos,(function(e){return n("el-col",{key:e.ID,attrs:{span:4}},[n("div",{staticStyle:{margin:"10px"}},[n("img",{staticClass:"video-thumb",attrs:{src:e.thumbUrl,alt:e.title}}),n("el-link",{staticClass:"video-title",attrs:{underline:!1},on:{click:function(n){return t.toVideo(e.ID)}}},[t._v(" "+t._s(e.title.substring(0,20))+" ")])],1)])})),1),n("br"),n("div",{staticClass:"pagination-bar"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.pagination.current,"page-count":t.pagination.total},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)},"current-change":function(e){return t.loadVideos()}}})],1)],1)},hn=[],gn={name:"ZoneVideo",props:{UID:{type:Number,required:!0}},data:function(){return{pagination:{total:1,current:1},videos:[]}},mounted:function(){this.loadVideos()},methods:{loadVideos:function(){var t=this;this.$http.get("/video/uploaded",{params:{UID:this.UID,page:this.pagination.current}}).then((function(e){var n=e.data;200===n.code?(t.pagination.total=n.data.total,t.videos=n.data.videos):t.$message.error(n.message)}))},toVideo:function(t){this.$router.push({path:"/video/",query:{ID:t}})}}},fn=gn,vn=(n("72cd"),Object(u["a"])(fn,mn,hn,!1,null,"7bec0938",null)),yn=vn.exports,xn={name:"Zone",components:{ZoneVideo:yn,ZoneComment:pn,ZoneAccount:rn},data:function(){return{UID:this.$route.query.UID}}},bn=xn,$n=Object(u["a"])(bn,Xe,Ye,!1,null,"16b31c30",null),_n=$n.exports;a["default"].config.productionTip=!1,a["default"].use(y["a"]),a["default"].use(x["a"]),a["default"].use(v["a"]);var wn=new y["a"]({routes:[{path:"/entry/",component:J,children:[{path:"forget",component:D},{path:"login",component:A},{path:"register",component:j}]},{path:"/home/",component:Jt,children:[{path:"account",component:W},{path:"collecting",component:at},{path:"comment",component:lt},{path:"editor",component:Dt},{path:"following",component:gt},{path:"history",component:$t},{path:"uploading",component:jt}]},{path:"/index/",component:De,children:[{path:"category",component:Wt},{path:"face",component:ge},{path:"search",component:$e}]},{path:"/video/",component:We},{path:"/zone/",component:_n}]}),kn=new v["a"].Store({state:{account:null},getters:{account:function(t){return t.account}},mutations:{account:function(t,e){return t.account=e}}});new a["default"]({router:wn,store:kn,render:function(t){return t(f)}}).$mount("#app")},"6d64":function(t,e,n){},"6e03":function(t,e,n){},7031:function(t,e,n){},7092:function(t,e,n){"use strict";var a=n("d80d"),o=n.n(a);o.a},"72cd":function(t,e,n){"use strict";var a=n("0fe3"),o=n.n(a);o.a},"7e33":function(t,e,n){},8979:function(t,e,n){"use strict";var a=n("e50e"),o=n.n(a);o.a},9050:function(t,e,n){"use strict";var a=n("ebd1"),o=n.n(a);o.a},"9c63":function(t,e,n){},a2cc:function(t,e,n){"use strict";var a=n("f38f"),o=n.n(a);o.a},a320:function(t,e,n){"use strict";var a=n("9c63"),o=n.n(a);o.a},a597:function(t,e,n){"use strict";var a=n("16a8"),o=n.n(a);o.a},a76b:function(t,e,n){"use strict";var a=n("bdd4"),o=n.n(a);o.a},aca4:function(t,e,n){"use strict";var a=n("6d64"),o=n.n(a);o.a},af07:function(t,e,n){},bdd4:function(t,e,n){},c048:function(t,e,n){},c69f:function(t,e,n){},d168:function(t,e,n){"use strict";var a=n("2804"),o=n.n(a);o.a},d80d:function(t,e,n){},db4f:function(t,e,n){"use strict";var a=n("2b40"),o=n.n(a);o.a},df74:function(t,e,n){"use strict";var a=n("47e6"),o=n.n(a);o.a},e123:function(t,e,n){"use strict";var a=n("4c3c"),o=n.n(a);o.a},e1bf:function(t,e,n){"use strict";var a=n("c048"),o=n.n(a);o.a},e50e:function(t,e,n){},ebd1:function(t,e,n){},eff9:function(t,e,n){"use strict";var a=n("130c"),o=n.n(a);o.a},f38f:function(t,e,n){},f3a5:function(t,e,n){"use strict";var a=n("7e33"),o=n.n(a);o.a},f4dc:function(t,e,n){"use strict";var a=n("1032"),o=n.n(a);o.a},fba2:function(t,e,n){"use strict";var a=n("18a9"),o=n.n(a);o.a}});
//# sourceMappingURL=app.7cc717f5.js.map